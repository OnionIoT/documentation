---
title: Wi-Fi Client (STA)
slug: /networking/wifi-sta
description: Join an existing Wi‑Fi network with the Omega4 radio in station mode and verify the connection on the CLI.
---

import WifiHtmodeNote from '../snippets/wifi-htmode.mdx';

# Wi-Fi Client (STA)

Use these steps to connect the Omega4 to an existing Wi‑Fi network as a station (client).

## 1. Prep the network interface
The default image already includes a `wwan` interface. If it is missing, create it:
```bash
uci set network.wwan=interface
uci set network.wwan.proto='dhcp'
uci commit network
```

<WifiHtmodeNote />

## 2. Scan for networks (optional)
If you are not sure which SSID to join (or which encryption mode it uses), do a quick scan first.

In STA mode, bring up the STA interface first so it exists, then scan using the interface name from `wifi status`:
```bash
iwinfo radio0 scan 
```

To scan 5 GHz networks, the radio must be set to `band='5g'` (see the 5 GHz config below). Switching bands will interrupt any existing Wi‑Fi link because this is a single radio.

Pick one of the following band-specific setups. Both start from the same clean `wireless` config; skip the section that does not apply to your AP.

## 3. Configure for 2.4 GHz
Station settings tuned for 2.4 GHz networks:
```bash
uci set wireless.radio0.disabled='0'
uci set wireless.radio0.he='0'
uci set wireless.radio0.band='2g'
uci set wireless.radio0.channel='11'     # or leave unset for auto
uci set wireless.radio0.htmode='HT40'
uci set wireless.radio0.country='US'     # replace with your country code

uci set wireless.default_radio0.mode='sta'
uci set wireless.default_radio0.network='wwan'
uci set wireless.default_radio0.ssid='YOUR_SSID'
uci set wireless.default_radio0.encryption='psk2'
uci set wireless.default_radio0.key='YOUR_PSK'   # 8–63 characters

uci commit wireless
wifi reload
```

## 4. Configure for 5 GHz
Station settings tuned for 5 GHz networks:
```bash
uci set wireless.radio0.disabled='0'
uci set wireless.radio0.he='0'
uci set wireless.radio0.band='5g'
uci set wireless.radio0.channel='36'     # prefer non-DFS channels (36/40/44/48) to avoid radar vacates
uci set wireless.radio0.htmode='VHT40'   # drop to HT40 if your wpad build lacks 11ac
uci set wireless.radio0.country='US'     # replace with your country code

uci set wireless.default_radio0.mode='sta'
uci set wireless.default_radio0.network='wwan'
uci set wireless.default_radio0.ssid='YOUR_SSID'
uci set wireless.default_radio0.encryption='psk2'
uci set wireless.default_radio0.key='YOUR_PSK'   # 8–63 characters

uci commit wireless
wifi reload
```

## 5. Verify the link
Check that the interface comes up and that `wwan` gets an address:
```bash
wifi status                          # look for ifname like phy0-sta0 and mode sta
ubus call network.interface.wwan status
ifconfig phy0-sta0                   # UP and RUNNING once associated (use the ifname from wifi status)
```
When connected, `ubus ... status` shows `up: true` and lists an IPv4/IPv6 address under `\"ipv4-address\"`/`\"ipv6-address\"`.

## 6. Allow SSH access over STA (optional)
By default, inbound SSH from the STA network may be blocked by the firewall. If you want to SSH into the Omega4 over its STA connection, pick one approach:

**Option A: Trust the STA network (adds `wwan` to LAN zone)**
```bash
uci add_list firewall.lan.network='wwan'
uci commit firewall
/etc/init.d/firewall restart
```

**Option B: Allow SSH on the STA firewall zone only**
```bash
uci add firewall rule
uci set firewall.@rule[-1].name='Allow-SSH-STA'
uci set firewall.@rule[-1].src='wwan'
uci set firewall.@rule[-1].proto='tcp'
uci set firewall.@rule[-1].dest_port='22'
uci set firewall.@rule[-1].target='ACCEPT'
uci commit firewall
/etc/init.d/firewall restart
```

## 7. Troubleshooting
- Log review: `logread | grep -i wpa_supplicant` and `logread | grep -i cfg80211`.
- Wrong key/SSID: re-run the `uci set wireless.default_radio0.*` lines, `uci commit wireless`, then `wifi reload`.
- 11ac config errors: if `logread` reports unknown `ieee80211ac`/`vht_*` options, your `wpad` build lacks 11ac; keep `htmode` at `HT20/HT40` or install a full `wpad` build.
- One role at a time: enabling STA mode disables the AP interface on this single radio; switch back to AP by restoring `mode='ap'` and your AP network (for example `network='wlan'`).

> Tested on Omega-2D29: `wifi status` reports interface `phy0-sta0` in `mode: sta` targeting SSID `TestNet`; `ubus call network.interface.wwan status` shows the interface available (no AP in range during test).
